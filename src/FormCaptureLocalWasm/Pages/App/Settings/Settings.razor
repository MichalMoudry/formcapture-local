@layout AppLayout
@inject ILocalStorageService localStorage
@inject IStringLocalizer<App> Localizer
@page "/formcapture/settings"

<IconHeader Icon="cog" Title="@Localizer["Settings"]" />

<Divider />

<div class="mb-3">
    <div class="card px-3 py-3">
        <IconSubheader Icon="globe" Title="Locale" />
        <p>Locale description</p>
        <select @bind="defaultLocale" title="Select default locale">
            <option value="eng">en-US</option>
            <option value="ces">cz-CS</option>
        </select>
    </div>

    <div class="card px-3 py-3 mt-4">
        <IconSubheader Icon="contrast" Title="Theme" />
        <div>
            <RadioGroup @bind-Value="@appTheme" class="w-100">
                <Radio Value="@("Default")" class="disable-select radio">Default</Radio>
                <Radio Value="@("HighContrastLight")" class="disable-select radio">High contrast light theme</Radio>
                <Radio Value="@("HighContrastDark")" class="disable-select radio">High contrast dark theme</Radio>
            </RadioGroup>
        </div>
        <Button Type="@ButtonType.Primary" class="mt-3">
            <span class="oi oi-check me-2"></span>@Localizer["SaveTemplateButtonText"]
        </Button>
    </div>
</div>

@code
{
    /// <summary>
    /// Default locale used throughout the app for recognition.
    /// Supported languages for tesseract.js: https://tesseract-ocr.github.io/tessdoc/Data-Files#data-files-for-version-400-november-29-2016.
    /// </summary>
    private string? defaultLocale;

    /// <summary>
    /// App's theme.
    /// </summary>
    private string? appTheme;

    protected override async Task OnInitializedAsync()
    {
        defaultLocale = await localStorage.GetItemAsStringAsync(FormCaptureLocalWasm.Models.Enums.Settings.DefaultLocale.ToString());
        defaultLocale = defaultLocale.Replace("\"", "");
        appTheme = await localStorage.GetItemAsStringAsync(FormCaptureLocalWasm.Models.Enums.Settings.ApplicationTheme.ToString());
        appTheme = appTheme.Replace("\"", "");
        Console.WriteLine(appTheme);
    }
}